{% extends '_template.html' %}
{% block content %}

<div class="flex justify-between items-center mb-4">
  <h3 class="text-xl font-semibold text-gray-800">Productos</h3>
  <a href="/profile" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Perfil</a>
</div>

<table class="min-w-full table-auto">
    <thead class="bg-gray-100">
        <tr>
            <th class="px-4 py-2 border text-center">ID</th>
            <th class="px-4 py-2 border text-center">NOM</th>
            <th class="px-4 py-2 border text-center">PREU</th>
            <th class="px-4 py-2 border text-center">CATEGORIA</th>
            <th class="px-4 py-2 border text-center">ACCIONS</th>
        </tr>
    </thead>
    <tbody>
        {% for product, category, banned in products_info %}
        <tr class="border-b">
            <!-- ID del producto -->
            <td class="px-4 py-2 border text-center">{{ product.id }}</td>

            <!-- Nombre del producto -->
            <td class="px-4 py-2 border text-center">{{ product.title }}</td>

            <!-- Precio del producto -->
            <td class="px-4 py-2 border text-center">{{ product.price }}</td>

            <!-- Nombre de la categoría -->
            <td class="px-4 py-2 border text-center">{{ category.name }}</td>

            <!-- Acciones de moderación -->
            <td class="px-4 py-2 border text-center">
                {% if banned %}
                <form action="{{ url_for('admin_bp.unban_product', product_id=product.id) }}" method="post">
                        <input type="submit" value="Desbanear" class="btn btn-warning">
                    </form>
                {% else %}
                    <form action="{{ url_for('admin_bp.ban_product', product_id=product.id) }}" method="post">
                        <textarea name="reason" placeholder="Razón del ban" required></textarea>
                        <input type="submit" value="Banear" class="btn btn-danger">
                    </form>    
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="/products/create" class="mt-4 inline-block bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Crear un nou producte</a>

{% endblock %}
